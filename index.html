<!DOCTYPE html>
<html>
  <head>
    <title>Adventures of Blue Shoes</title>
  </head>
  <body>
    <canvas id="canvas"></canvas> 

    <script>

      const canvas = document.getElementById('canvas')
      const ctx = canvas.getContext('2d')
      
      var resize = () => {
        canvas.height = window.innerHeight
        canvas.width = window.innerWidth
      }
      
      resize();
    
      window.addEventListener('resize', resize);
      
      var Player = {
        x: 700,
        y: canvas.height - 100,
        vx: 0,
        vy: 0,
        ax: 0,
        ay: 0,
        jx: 0,
        jy: 0,
        height: 100,
        width: 100,
        color: "turquoise"  
      }

      var Platform = {
        x: 200,
        y: 500,
        length: 250,
        height: 40,
        color: "pink"
      }
  
      var jump = () => {
        if (Player.y == canvas.height - 100) {  // is on ground
          Player.vy = -12
          Player.ay = 0.025
          Player.jy = 0.02
        }
      }
      var keyPressedTime = {};
      var whichKeyPressed = {};
      let e = 0;
      var pressed = false;
      var duration;

      // Keys that are pressed
      const keysPressed = new Set()
      // Handle keydown
      window.addEventListener('keydown', e => {
        keysPressed.add(e.key)
      })
      // Handle keyup
      window.addEventListener('keyup', e => {
        keysPressed.delete(e.key)
      })

      function draw(){
        if(keysPressed.has('ArrowRight')){
          Player.x += keysPressed.has('Shift') ? 6 : 3 
        }
        if(keysPressed.has('ArrowLeft')){
          Player.x -= keysPressed.has('Shift') ? 6 : 3 
        }
        if(keysPressed.has('ArrowUp')){
          jump()
        }
        if(keysPressed.has('ArrowDown')){
          Player.y += 3
        }

        Player.x += Player.vx
        Player.vx += Player.ax
        Player.ax += Player.jx
        
        Player.y += Player.vy
        Player.vy += Player.ay
        Player.ay += Player.jy

        // Wall Collision
        if(Player.y < 0) {
          Player.y = 0;
        }

        if(Player.x < 0) {
          Player.x = 0;
        }

        if(Player.x + 100 > canvas.width) {
          Player.x = canvas.width - 100;
        }

        if(Player.y + 100 > canvas.height) {
          Player.y = canvas.height - 100;
        }
        
        ctx.clearRect(0, 0, window.innerWidth, window.innerHeight)
        ctx.beginPath()
        ctx.fillStyle = 'pink'
    
        ctx.fillRect(Player.x, Player.y, Player.width, Player.height)
        ctx.stroke()
        ctx.fill()

        ctx.fillRect(Platform.x, Platform.y, Platform.length, Platform.height)
        ctx.stroke()
        ctx.fill()


        requestAnimationFrame(draw)
      }

      draw()
    </script>
    <style>
      #canvas {
        width: 100%;
        height: 100%;
        margin: 0px;
        padding: 0px;
      }
      body {
        margin: 0px;
        padding: 0px;
        overflow: hidden;
      }
    </style>
  </body>
</html>